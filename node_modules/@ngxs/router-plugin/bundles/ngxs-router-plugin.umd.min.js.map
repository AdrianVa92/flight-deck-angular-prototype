{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://@ngxs/router-plugin/src/router.actions.ts","ng://@ngxs/router-plugin/src/serializer.ts","ng://@ngxs/router-plugin/src/router.state.ts","ng://@ngxs/router-plugin/src/router.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__decorate","decorators","target","key","desc","d","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadata","metadataKey","metadataValue","metadata","Navigate","path","queryParams","extras","RouterNavigation","routerState","event","trigger","RouterCancel","storeState","RouterError","RouterDataResolved","DefaultRouterStateSerializer","serialize","root","serializeRoute","url","route","_this","children","map","params","fragment","data","outlet","component","routeConfig","parent","firstChild","pathFromRoot","paramMap","queryParamMap","toString","RouterState","_store","_router","_serializer","_ngZone","_urlSerializer","_locationStrategy","_location","_trigger","_routerState","_storeState","_lastRoutesRecognized","setUpStoreListener","setUpRouterEventsListener","checkInitialNavigationOnce","state","navigate","_","action","run","angularRouterAction","ctx","setState","getState","navigationId","id","select","RouterState_1","subscribe","navigateIfNeeded","events","NavigationStart","navigationStart","RoutesRecognized","GuardsCheckEnd","shouldActivate","guardsCheckEnd","ResolveEnd","dispatchRouterDataResolved","NavigationCancel","dispatchRouterCancel","reset","NavigationError","dispatchRouterError","NavigationEnd","snapshot","selectSnapshot","shouldDispatchRouterNavigation","navigateByUrl","dispatchRouterNavigation","nextRouterState","dispatchRouterAction","urlAfterRedirects","dispatch","isAngularInTestMode","pipe","first","_a","currentUrl","normalize","currentUrlTree","parse","Store","Router","RouterStateSerializer","NgZone","UrlSerializer","LocationStrategy","Location","Injectable","tslib_1.__decorate","Action","Selector","State","name","defaults","undefined","NgxsRouterPluginModule","forRoot","ngModule","providers","provide","useClass","NgModule","args","imports","NgxsModule","forFeature"],"mappings":";;;;;;;;;;;;;;oFA6BO,IAAIA,EAAW,WAQlB,OAPAA,EAAWC,OAAOC,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,IAE9E,OAAON,IAEKU,MAAMC,KAAMP,YAezB,SAASQ,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HC,EAAvHC,EAAId,UAAUC,OAAQc,EAAID,EAAI,EAAIJ,EAAkB,OAATE,EAAgBA,EAAOlB,OAAOsB,yBAAyBN,EAAQC,GAAOC,EACrH,GAAuB,iBAAZK,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAId,EAAIW,EAAWR,OAAS,EAAGH,GAAK,EAAGA,KAASe,EAAIJ,EAAWX,MAAIiB,GAAKD,EAAI,EAAID,EAAEE,GAAKD,EAAI,EAAID,EAAEH,EAAQC,EAAKI,GAAKF,EAAEH,EAAQC,KAASI,GAChJ,OAAOD,EAAI,GAAKC,GAAKrB,OAAOyB,eAAeT,EAAQC,EAAKI,GAAIA,EAOzD,SAASK,EAAWC,EAAaC,GACpC,GAAuB,iBAAZL,SAAoD,mBAArBA,QAAQM,SAAyB,OAAON,QAAQM,SAASF,EAAaC,GCjDpH,iBAKE,SAAAE,EACSC,EACAC,EACAC,GAFApB,KAAAkB,KAAAA,EACAlB,KAAAmB,YAAAA,EACAnB,KAAAoB,OAAAA,EAEX,OATEjC,OAAAyB,eAAWK,EAAA,OAAI,KAAf,WAEE,MAAO,qDAOXA,KAWA,iBAKE,SAAAI,EACSC,EACAC,EACAC,QAAA,IAAAA,IAAAA,EAAA,QAFAxB,KAAAsB,YAAAA,EACAtB,KAAAuB,MAAAA,EACAvB,KAAAwB,QAAAA,EAEX,OATErC,OAAAyB,eAAWS,EAAA,OAAI,KAAf,WAEE,MAAO,6DAOXA,KAKA,iBAKE,SAAAI,EACSH,EACAI,EACAH,EACAC,QAAA,IAAAA,IAAAA,EAAA,QAHAxB,KAAAsB,YAAAA,EACAtB,KAAA0B,WAAAA,EACA1B,KAAAuB,MAAAA,EACAvB,KAAAwB,QAAAA,EAEX,OAVErC,OAAAyB,eAAWa,EAAA,OAAI,KAAf,WAEE,MAAO,yDAQXA,KAKA,iBAKE,SAAAE,EACSL,EACAI,EACAH,EACAC,QAAA,IAAAA,IAAAA,EAAA,QAHAxB,KAAAsB,YAAAA,EACAtB,KAAA0B,WAAAA,EACA1B,KAAAuB,MAAAA,EACAvB,KAAAwB,QAAAA,EAEX,OAVErC,OAAAyB,eAAWe,EAAA,OAAI,KAAf,WAEE,MAAO,wDAQXA,KAKA,iBAKE,SAAAC,EACSN,EACAC,EACAC,QAAA,IAAAA,IAAAA,EAAA,QAFAxB,KAAAsB,YAAAA,EACAtB,KAAAuB,MAAAA,EACAvB,KAAAwB,QAAAA,EAEX,OATErC,OAAAyB,eAAWgB,EAAA,OAAI,KAAf,WAEE,MAAO,+DAOXA,KC3FA,MAAA,aASA,IAAAC,EAAA,WAAA,SAAAA,KA8BA,OA5BEA,EAAAjC,UAAAkC,UAAA,SAAUR,GACR,MAAO,CACLS,KAAM/B,KAAKgC,eAAeV,EAAYS,MACtCE,IAAKX,EAAYW,MAIbJ,EAAAjC,UAAAoC,eAAR,SAAuBE,GAAvB,IAAAC,EAAAnC,KACQoC,EAAWF,EAAME,SAASC,KAAG,SAAC9B,GAAK,OAAA4B,EAAKH,eAAezB,MAC7D,MAAO,CACL0B,IAAKC,EAAMD,IACXK,OAAQJ,EAAMI,OACdnB,YAAae,EAAMf,YACnBoB,SAAUL,EAAMK,SAChBC,KAAMN,EAAMM,KACZC,OAAQP,EAAMO,OACdC,UAAW,KACXC,YAAa,KACbZ,KAAI,KACJa,OAAQ,KACRC,WAAYT,EAAS,GACrBA,SAAUA,EACVU,aAAY,KACZC,SAAUb,EAAMa,SAChBC,cAAed,EAAMc,cACrBC,SAAUf,EAAMe,WAGtBpB,EA9BA,oBC+DE,SAAAqB,EACUC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GANAzD,KAAAmD,OAAAA,EACAnD,KAAAoD,QAAAA,EACApD,KAAAqD,YAAAA,EACArD,KAAAsD,QAAAA,EACAtD,KAAAuD,eAAAA,EACAvD,KAAAwD,kBAAAA,EACAxD,KAAAyD,UAAAA,EA/BFzD,KAAA0D,SAA0B,OAK1B1D,KAAA2D,aAA2C,KAK3C3D,KAAA4D,YAAuC,KAEvC5D,KAAA6D,sBAAqB,KAqB3B7D,KAAK8D,qBACL9D,KAAK+D,4BACL/D,KAAKgE,mCAgMT,SAxOad,EAoBJA,EAAAe,MAAP,SAAsCA,GACpC,OAAOA,GAASA,EAAMA,OAIjBf,EAAAjB,IAAP,SAAWgC,GACT,OAAOA,GAASA,EAAMA,OAASA,EAAMA,MAAMhC,KAkB7CiB,EAAAtD,UAAAsE,SAAA,SAASC,EAAmCC,GAD5C,IAAAjC,EAAAnC,KAEE,OAAOA,KAAKsD,QAAQe,KAAG,WACrB,OAAAlC,EAAKiB,QAAQc,SAASE,EAAOlD,KAAIhC,EAAA,CAC/BiC,YAAaiD,EAAOjD,aACjBiD,EAAOhD,aAMhB8B,EAAAtD,UAAA0E,oBAAA,SACEC,EACAH,GAEAG,EAAIC,SAAQtF,EAAA,GACPqF,EAAIE,WAAU,CACjBjD,QAAS4C,EAAO5C,QAChByC,MAAOG,EAAO9C,YACdoD,aAAcN,EAAO7C,MAAMoD,OAIvBzB,EAAAtD,UAAAkE,mBAAR,WAAA,IAAA3B,EAAAnC,KACEA,KAAKmD,OAAOyB,OAAOC,GAAaC,WAAS,SAAEb,GACzC9B,EAAK4C,iBAAiBd,OAIlBf,EAAAtD,UAAAmE,0BAAR,WAAA,IAAA5B,EAAAnC,KACEA,KAAKoD,QAAQ4B,OAAOF,WAAS,SAACvD,GACxBA,aAAiB0D,EAAAA,gBACnB9C,EAAK+C,kBACI3D,aAAiB4D,EAAAA,iBAC1BhD,EAAK0B,sBAAwBtC,EACpBA,aAAiB6D,EAAAA,gBAAkB7D,EAAM8D,eAClDlD,EAAKmD,eAAe/D,GACXA,aAAiBgE,EAAAA,WAC1BpD,EAAKqD,2BAA2BjE,GACvBA,aAAiBkE,EAAAA,kBAC1BtD,EAAKuD,qBAAqBnE,GAC1BY,EAAKwD,SACIpE,aAAiBqE,EAAAA,iBAC1BzD,EAAK0D,oBAAoBtE,GACzBY,EAAKwD,SACIpE,aAAiBuE,EAAAA,eAC1B3D,EAAKwD,YAKHzC,EAAAtD,UAAAsF,gBAAR,WACElF,KAAK2D,aAAe3D,KAAKqD,YAAYvB,UAAU9B,KAAKoD,QAAQ9B,YAAYyE,UAElD,SAAlB/F,KAAK0D,WACP1D,KAAK4D,YAAc5D,KAAKmD,OAAO6C,eAAenB,KAI1C3B,EAAAtD,UAAAqG,+BAAR,WACE,OAAKjG,KAAK4D,aACe,UAAlB5D,KAAK0D,UAGNR,EAAAtD,UAAAmF,iBAAR,SAAyBd,GAAzB,IAAA9B,EAAAnC,MAEKA,KAAK4D,cACL5D,KAAK4D,YAAYK,QACjBA,GACiB,WAAlBA,EAAMzC,SACNxB,KAAKoD,QAAQnB,MAAQjC,KAAK4D,YAAYK,MAAMhC,MAM9CjC,KAAK0D,SAAW,QAChB1D,KAAKsD,QAAQe,KAAG,WACdlC,EAAKiB,QAAQ8C,cAAc/D,EAAgB,YAAO,MAAEF,UAIhDiB,EAAAtD,UAAAuG,yBAAR,eACQC,EAAkBpG,KAAKqD,YAAYvB,UAAU9B,KAAK6D,sBAAsBI,OAE9EjE,KAAKqG,qBACH,IAAIhF,EACF+E,EACA,IAAIjB,EAAAA,iBACFnF,KAAK6D,sBAAsBc,GAC3B3E,KAAK6D,sBAAsB5B,IAC3BjC,KAAK6D,sBAAsByC,kBAC3BF,GAEFpG,KAAK0D,YAKHR,EAAAtD,UAAA8F,qBAAR,SAA6BnE,GAC3BvB,KAAKqG,qBACH,IAAI5E,EAAazB,KAAiB,aAAGA,KAAK4D,YAAarC,EAAOvB,KAAK0D,WAErE1D,KAAK2F,SAGCzC,EAAAtD,UAAAiG,oBAAR,SAA4BtE,GAC1BvB,KAAKqG,qBACH,IAAI1E,EACF3B,KAAiB,aACjBA,KAAK4D,YACL,IAAIgC,EAAAA,gBAAgBrE,EAAMoD,GAAIpD,EAAMU,IAAK,GAAGV,GAC5CvB,KAAK0D,YAKHR,EAAAtD,UAAAyG,qBAAR,SAAgCjC,GAC9BpE,KAAK0D,SAAW,SAEhB,IACE1D,KAAKmD,OAAOoD,SAASnC,WAErBpE,KAAK0D,SAAW,SAIZR,EAAAtD,UAAA0F,eAAR,SAAuB/D,GACrBvB,KAAK2D,aAAe3D,KAAKqD,YAAYvB,UAAUP,EAAM0C,OAEjDjE,KAAKiG,kCACPjG,KAAKmG,4BAIDjD,EAAAtD,UAAA4F,2BAAR,SAAmCjE,OAC3BD,EAActB,KAAKqD,YAAYvB,UAAUP,EAAM0C,OACrDjE,KAAKqG,qBAAqB,IAAIzE,EAAmBN,EAAaC,EAAOvB,KAAK0D,YAGpER,EAAAtD,UAAA+F,MAAR,WACE3F,KAAK0D,SAAW,OAChB1D,KAAK4D,YAAc,KACnB5D,KAAK2D,aAAe,MAQdT,EAAAtD,UAAAoE,2BAAR,WAAA,IAAA7B,EAAAnC,KACMwG,EAAAA,uBAIJxG,KAAKoD,QAAQ4B,OACVyB,KAAKC,EAAAA,OAAK,SAAEnF,GAAqC,OAAAA,aAAiB4D,EAAAA,qBAClEL,WAAS,SAAE6B,OAAE1E,EAAA0E,EAAA1E,IAiBN2E,EAAazE,EAAKsB,UAAUoD,UAAU1E,EAAKqB,kBAAkBtC,MAAK,IAClE4F,EAAiB3E,EAAKoB,eAAewD,MAAMH,GAIpBzE,EAAKoB,eAAezB,UAAUgF,KAI9B7E,GAC3BE,EAAKiB,QAAQ8C,cAAcU,gDAtMjBI,EAAAA,aACCC,EAAAA,cACIC,SACJC,EAAAA,cACOC,EAAAA,qBACGC,EAAAA,wBACRC,EAAAA,gCArCtBC,EAAAA,sDA9B+CP,EAAAA,aAV9CC,EAAAA,cAsBOC,SA1BAC,EAAAA,cAQPC,EAAAA,qBAKOC,EAAAA,wBAAkBC,EAAAA,YA4EzBE,EAAAA,CADCC,EAAAA,OAAOxG,2DAC4CA,gEAUpDuG,EAAAA,CADCC,EAAAA,OAAO,CAACpG,EAAkBM,EAAaF,EAAcG,4IAjCtD4F,EAAAA,CADCE,EAAAA,oHAMDF,EAAAA,CADCE,EAAAA,kHAxBUxE,EAAW2B,EAAA5E,EAAA,CATvB0H,EAAAA,MAAwB,CACvBC,KAAM,SACNC,SAAU,CACR5D,WAAO6D,EACPpD,kBAAcoD,EACdtG,QAAS,iCAkCOwF,EAAAA,MACCC,EAAAA,OACIC,EACJC,EAAAA,OACOC,EAAAA,cACGC,EAAAA,iBACRC,EAAAA,YApCVpE,MC7Cb,IAAA6E,EAAA,WAMA,SAAAA,KAUA,OANSA,EAAAC,QAAP,WACE,MAAO,CACLC,SAAUF,EACVG,UAAW,CAAC,CAAEC,QAASjB,EAAuBkB,SAAUvG,0BAP7DwG,EAAAA,SAAQC,KAAA,CAAC,CACRC,QAAS,CAACC,EAAAA,WAAWC,WAAW,CAACvF,SASnC6E,EAhBA","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\r\n  NavigationCancel,\r\n  NavigationError,\r\n  NavigationExtras,\r\n  Params,\r\n  RouterStateSnapshot,\r\n  RoutesRecognized,\r\n  ResolveEnd\r\n} from '@angular/router';\r\n\r\nimport { RouterTrigger } from './router.state';\r\n\r\n/**\r\n * Public event api of the router\r\n */\r\nexport class Navigate {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] Navigate';\r\n  }\r\n  constructor(\r\n    public path: any[],\r\n    public queryParams?: Params,\r\n    public extras?: NavigationExtras\r\n  ) {}\r\n}\r\n\r\n/**\r\n *\r\n * Angular Routers internal state events\r\n *\r\n */\r\n\r\n/**\r\n * An action dispatched when the router navigates.\r\n */\r\nexport class RouterNavigation<T = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterNavigation';\r\n  }\r\n  constructor(\r\n    public routerState: T,\r\n    public event: RoutesRecognized,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An action dispatched when the router cancel navigation.\r\n */\r\nexport class RouterCancel<T, V = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterCancel';\r\n  }\r\n  constructor(\r\n    public routerState: V,\r\n    public storeState: T,\r\n    public event: NavigationCancel,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An action dispatched when the router errors.\r\n */\r\nexport class RouterError<T, V = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterError';\r\n  }\r\n  constructor(\r\n    public routerState: V,\r\n    public storeState: T,\r\n    public event: NavigationError,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An action dispatched when the `ResolveEnd` event is triggered.\r\n */\r\nexport class RouterDataResolved<T = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterDataResolved';\r\n  }\r\n  constructor(\r\n    public routerState: T,\r\n    public event: ResolveEnd,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An union type of router actions.\r\n */\r\nexport type RouterAction<T, V = RouterStateSnapshot> =\r\n  | RouterNavigation<V>\r\n  | RouterCancel<T, V>\r\n  | RouterError<T, V>\r\n  | RouterDataResolved<V>;\r\n","import { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nexport abstract class RouterStateSerializer<T> {\r\n  abstract serialize(routerState: RouterStateSnapshot): T;\r\n}\r\n\r\nexport interface SerializedRouterStateSnapshot {\r\n  root: ActivatedRouteSnapshot;\r\n  url: string;\r\n}\r\n\r\nexport class DefaultRouterStateSerializer\r\n  implements RouterStateSerializer<SerializedRouterStateSnapshot> {\r\n  serialize(routerState: RouterStateSnapshot): SerializedRouterStateSnapshot {\r\n    return {\r\n      root: this.serializeRoute(routerState.root),\r\n      url: routerState.url\r\n    };\r\n  }\r\n\r\n  private serializeRoute(route: ActivatedRouteSnapshot): ActivatedRouteSnapshot {\r\n    const children = route.children.map(c => this.serializeRoute(c));\r\n    return {\r\n      url: route.url,\r\n      params: route.params,\r\n      queryParams: route.queryParams,\r\n      fragment: route.fragment,\r\n      data: route.data,\r\n      outlet: route.outlet,\r\n      component: null,\r\n      routeConfig: null,\r\n      root: null as any,\r\n      parent: null,\r\n      firstChild: children[0],\r\n      children: children,\r\n      pathFromRoot: null as any,\r\n      paramMap: route.paramMap,\r\n      queryParamMap: route.queryParamMap,\r\n      toString: route.toString\r\n    };\r\n  }\r\n}\r\n","import { NgZone, Injectable } from '@angular/core';\r\nimport {\r\n  NavigationCancel,\r\n  NavigationError,\r\n  Router,\r\n  RouterStateSnapshot,\r\n  RoutesRecognized,\r\n  ResolveEnd,\r\n  UrlSerializer,\r\n  NavigationStart,\r\n  NavigationEnd,\r\n  GuardsCheckEnd\r\n} from '@angular/router';\r\nimport { LocationStrategy, Location } from '@angular/common';\r\nimport { Action, Selector, State, StateContext, Store } from '@ngxs/store';\r\nimport { isAngularInTestMode } from '@ngxs/store/internals';\r\nimport { first } from 'rxjs/operators';\r\n\r\nimport {\r\n  Navigate,\r\n  RouterAction,\r\n  RouterCancel,\r\n  RouterError,\r\n  RouterNavigation,\r\n  RouterDataResolved\r\n} from './router.actions';\r\nimport { RouterStateSerializer } from './serializer';\r\n\r\nexport interface RouterStateModel<T = RouterStateSnapshot> {\r\n  state?: T;\r\n  navigationId?: number;\r\n  trigger: RouterTrigger;\r\n}\r\n\r\nexport type RouterTrigger = 'none' | 'router' | 'store';\r\n\r\n@State<RouterStateModel>({\r\n  name: 'router',\r\n  defaults: {\r\n    state: undefined,\r\n    navigationId: undefined,\r\n    trigger: 'none'\r\n  }\r\n})\r\n@Injectable()\r\nexport class RouterState {\r\n  /**\r\n   * Determines how navigation was performed by the `RouterState` itself\r\n   * or outside via `new Navigate(...)`\r\n   */\r\n  private _trigger: RouterTrigger = 'none';\r\n\r\n  /**\r\n   * That's the serialized state from the `Router` class\r\n   */\r\n  private _routerState: RouterStateSnapshot | null = null;\r\n\r\n  /**\r\n   * That's the value of the `RouterState` state\r\n   */\r\n  private _storeState: RouterStateModel | null = null;\r\n\r\n  private _lastRoutesRecognized: RoutesRecognized = null!;\r\n\r\n  @Selector()\r\n  static state<T = RouterStateSnapshot>(state: RouterStateModel<T>) {\r\n    return state && state.state;\r\n  }\r\n\r\n  @Selector()\r\n  static url(state: RouterStateModel): string | undefined {\r\n    return state && state.state && state.state.url;\r\n  }\r\n\r\n  constructor(\r\n    private _store: Store,\r\n    private _router: Router,\r\n    private _serializer: RouterStateSerializer<RouterStateSnapshot>,\r\n    private _ngZone: NgZone,\r\n    private _urlSerializer: UrlSerializer,\r\n    private _locationStrategy: LocationStrategy,\r\n    private _location: Location\r\n  ) {\r\n    this.setUpStoreListener();\r\n    this.setUpRouterEventsListener();\r\n    this.checkInitialNavigationOnce();\r\n  }\r\n\r\n  @Action(Navigate)\r\n  navigate(_: StateContext<RouterStateModel>, action: Navigate) {\r\n    return this._ngZone.run(() =>\r\n      this._router.navigate(action.path, {\r\n        queryParams: action.queryParams,\r\n        ...action.extras\r\n      })\r\n    );\r\n  }\r\n\r\n  @Action([RouterNavigation, RouterError, RouterCancel, RouterDataResolved])\r\n  angularRouterAction(\r\n    ctx: StateContext<RouterStateModel>,\r\n    action: RouterAction<RouterStateModel, RouterStateSnapshot>\r\n  ): void {\r\n    ctx.setState({\r\n      ...ctx.getState(),\r\n      trigger: action.trigger,\r\n      state: action.routerState,\r\n      navigationId: action.event.id\r\n    });\r\n  }\r\n\r\n  private setUpStoreListener(): void {\r\n    this._store.select(RouterState).subscribe((state: RouterStateModel | undefined) => {\r\n      this.navigateIfNeeded(state);\r\n    });\r\n  }\r\n\r\n  private setUpRouterEventsListener(): void {\r\n    this._router.events.subscribe(event => {\r\n      if (event instanceof NavigationStart) {\r\n        this.navigationStart();\r\n      } else if (event instanceof RoutesRecognized) {\r\n        this._lastRoutesRecognized = event;\r\n      } else if (event instanceof GuardsCheckEnd && event.shouldActivate) {\r\n        this.guardsCheckEnd(event);\r\n      } else if (event instanceof ResolveEnd) {\r\n        this.dispatchRouterDataResolved(event);\r\n      } else if (event instanceof NavigationCancel) {\r\n        this.dispatchRouterCancel(event);\r\n        this.reset();\r\n      } else if (event instanceof NavigationError) {\r\n        this.dispatchRouterError(event);\r\n        this.reset();\r\n      } else if (event instanceof NavigationEnd) {\r\n        this.reset();\r\n      }\r\n    });\r\n  }\r\n\r\n  private navigationStart(): void {\r\n    this._routerState = this._serializer.serialize(this._router.routerState.snapshot);\r\n\r\n    if (this._trigger !== 'none') {\r\n      this._storeState = this._store.selectSnapshot(RouterState);\r\n    }\r\n  }\r\n\r\n  private shouldDispatchRouterNavigation(): boolean {\r\n    if (!this._storeState) return true;\r\n    return this._trigger !== 'store';\r\n  }\r\n\r\n  private navigateIfNeeded(state: RouterStateModel | undefined): void {\r\n    const canSkipNavigation =\r\n      !this._storeState ||\r\n      !this._storeState.state ||\r\n      !state ||\r\n      state.trigger === 'router' ||\r\n      this._router.url === this._storeState.state.url;\r\n\r\n    if (canSkipNavigation) {\r\n      return;\r\n    }\r\n\r\n    this._trigger = 'store';\r\n    this._ngZone.run(() => {\r\n      this._router.navigateByUrl(this._storeState!.state!.url);\r\n    });\r\n  }\r\n\r\n  private dispatchRouterNavigation(): void {\r\n    const nextRouterState = this._serializer.serialize(this._lastRoutesRecognized.state);\r\n\r\n    this.dispatchRouterAction(\r\n      new RouterNavigation(\r\n        nextRouterState,\r\n        new RoutesRecognized(\r\n          this._lastRoutesRecognized.id,\r\n          this._lastRoutesRecognized.url,\r\n          this._lastRoutesRecognized.urlAfterRedirects,\r\n          nextRouterState\r\n        ),\r\n        this._trigger\r\n      )\r\n    );\r\n  }\r\n\r\n  private dispatchRouterCancel(event: NavigationCancel): void {\r\n    this.dispatchRouterAction(\r\n      new RouterCancel(this._routerState!, this._storeState, event, this._trigger)\r\n    );\r\n    this.reset();\r\n  }\r\n\r\n  private dispatchRouterError(event: NavigationError): void {\r\n    this.dispatchRouterAction(\r\n      new RouterError(\r\n        this._routerState!,\r\n        this._storeState,\r\n        new NavigationError(event.id, event.url, `${event}`),\r\n        this._trigger\r\n      )\r\n    );\r\n  }\r\n\r\n  private dispatchRouterAction<T>(action: RouterAction<T>): void {\r\n    this._trigger = 'router';\r\n\r\n    try {\r\n      this._store.dispatch(action);\r\n    } finally {\r\n      this._trigger = 'none';\r\n    }\r\n  }\r\n\r\n  private guardsCheckEnd(event: GuardsCheckEnd) {\r\n    this._routerState = this._serializer.serialize(event.state);\r\n\r\n    if (this.shouldDispatchRouterNavigation()) {\r\n      this.dispatchRouterNavigation();\r\n    }\r\n  }\r\n\r\n  private dispatchRouterDataResolved(event: ResolveEnd): void {\r\n    const routerState = this._serializer.serialize(event.state);\r\n    this.dispatchRouterAction(new RouterDataResolved(routerState, event, this._trigger));\r\n  }\r\n\r\n  private reset(): void {\r\n    this._trigger = 'none';\r\n    this._storeState = null;\r\n    this._routerState = null;\r\n  }\r\n\r\n  /**\r\n   * No sense to mess up the `setUpRouterEventsListener` method as we have\r\n   * to perform this check only once and unsubscribe after the first event\r\n   * is triggered\r\n   */\r\n  private checkInitialNavigationOnce(): void {\r\n    if (isAngularInTestMode()) {\r\n      return;\r\n    }\r\n\r\n    this._router.events\r\n      .pipe(first((event): event is RoutesRecognized => event instanceof RoutesRecognized))\r\n      .subscribe(({ url }) => {\r\n        // `location.pathname` always equals manually entered URL in the address bar\r\n        // e.g. `location.pathname === '/foo'`, but the `router` state has been initialized\r\n        // with another URL (e.g. used in combination with `NgxsStoragePlugin`), thus the\r\n        // `RouterNavigation` action will be dispatched and the user will be redirected to the\r\n        // previously saved URL. We want to prevent such behavior, so we perform this check\r\n\r\n        // `url` is a recognized URL by the Angular's router, while `currentUrl` is an actual URL\r\n        // entered in the browser's address bar\r\n        // `PathLocationStrategy.prototype.path()` returns a concatenation of\r\n        // `PlatformLocation.pathname` and normalized `PlatformLocation.search`.\r\n\r\n        // `Location.prototype.normalize` strips base href from the URL,\r\n        // if `baseHref` (declared in angular.json) for example is `/en`\r\n        // and the URL is `/test#anchor` - then `_locationStrategy.path(true)` will return `/en/test#anchor`,\r\n        // but `/en/test#anchor` is not known to the Angular's router, so we have to strip `/en`\r\n        // from the URL\r\n        const currentUrl = this._location.normalize(this._locationStrategy.path(true));\r\n        const currentUrlTree = this._urlSerializer.parse(currentUrl);\r\n        // We need to serialize the URL because in that example `/test/?redirect=https://google.com/`\r\n        // Angular will recognize it as `/test?redirect=https:%2F%2Fwww.google.com%2F`\r\n        // so we have to run the `currentUrl` via the `UrlSerializer` that will encode characters\r\n        const currentSerializedUrl = this._urlSerializer.serialize(currentUrlTree);\r\n\r\n        // If URLs differ from each other - we've got to perform a redirect to the manually entered URL\r\n        // in the address bar, as it must have a priority\r\n        if (currentSerializedUrl !== url) {\r\n          this._router.navigateByUrl(currentUrl);\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { NgxsModule } from '@ngxs/store';\r\n\r\nimport { RouterState } from './router.state';\r\nimport { DefaultRouterStateSerializer, RouterStateSerializer } from './serializer';\r\n\r\n@NgModule({\r\n  imports: [NgxsModule.forFeature([RouterState])]\r\n})\r\nexport class NgxsRouterPluginModule {\r\n  static forRoot(): ModuleWithProviders<NgxsRouterPluginModule> {\r\n    return {\r\n      ngModule: NgxsRouterPluginModule,\r\n      providers: [{ provide: RouterStateSerializer, useClass: DefaultRouterStateSerializer }]\r\n    };\r\n  }\r\n}\r\n"]}